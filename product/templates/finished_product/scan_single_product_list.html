{% extends 'product/base.html' %}
{% load static %}
{% block body %}


<div class="mt-3">
    <!-- <div>
       <label>Reference No: </label> 
       <label>Model Name: </label> 
       <label>Img :</label>
    </div> -->
    <table class="table table-striped table-hover table-bordered">
        <thead class="name_absolute sticky-top">
            <tr>
                <th>No</th>
                <th>voucher</th>
                <th>Image</th>
                <th>Ref No</th>
                <th>Model Name</th>
                <th>Color</th>
                <th>Product SKU</th>
                <th>Product Serial No</th>
                <th>Inward date</th>
                <th>Quantity</th>
            </tr>
        </thead>
        <tbody class="mainTableList" style="max-height: 450px; overflow-y: auto;">
            
            {% for entry in instance_entries %}
            <tr>
                <td>{{forloop.counter}}</td>
                {% if entry.related_purchase_item %}
                <td>puchase/{{entry.related_purchase_item.product_purchase_master.purchase_number}}</td>
                {% else %}
                <td>transfer/{{entry.related_transfer_record.Finished_goods_Stock_TransferMasterinstance.voucher_no}}</td> 
                {% endif %}
                <td><img id="productImgPreview" name="product_img" src="{{entry.product.PProduct_image.url}}" alt="Product" style="width: 30px; height: 30px;" onclick="showLargeImage(this.src)"></td>
                <td class="refNo">{{entry.product.Product.Product_Refrence_ID}}</td>
                <td>{{entry.product.Product.Model_Name}}</td>
                <td>{{entry.product.PProduct_color.color_name}}</td>
                <td>{{entry.product.PProduct_SKU}}</td>
                <td>{{entry.unique_serial_no}}</td>
                <td>{{entry.created_date}}</td>
                <td class="text-center">1</td>
                
             </tr>
            {% endfor %}
      
        </tbody>    
    </table>
</div>
<div id="customModal" style="display:none; position:fixed; top:0; left:0; height:100%; background:rgba(34, 34, 34, 0.9); display:flex; align-items:center; justify-content:center;">
    <img id="modalImg" style="max-width:60%; max-height:60%; cursor:pointer;">
</div>
<script>
    document.body.appendChild(document.getElementById('customModal'));
    function showLargeImage(src) {
     let modal = document.getElementById("customModal");
     let modalImg = document.getElementById("modalImg");

     modalImg.src = src;
     modal.style.display = "flex";
     modal.style.width = '100%'
     // Clicking anywhere outside the image will close the modal
     modal.onclick = function() {
         modal.style.display = "none";
     };
 }
</script>

{% endblock body %}