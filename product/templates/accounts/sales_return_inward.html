{% extends 'product/base.html' %} 
{% load static %} 

{% block body %}
<form class="mt-3" action="" method="POST" id="salesForm">
    {% csrf_token %}
   
    <div class="d-flex mb-3">
      <div class="d-flex mb-1">
        <input type="hidden" id="productSaleDate" value="">
      </div>
      <span id="purchaseError" class="error-messages"></span>
      <div class="d-flex">
        <label for="id_sales_return_no" class="me-2">Sales Return No:</label>

        <input type="text" class="purchase-vNo" name="sales_return_no" id="id_sales_return_no" value="" maxlength="255" required>

      </div>

      <span id="SupplierError" class="error-messages"></span>

      <div class="d-flex ms-3">
        <label for="id_sales_voucher_master" class="me-2">Sales No :</label>
        {% if master_form.instance.id %}
        <input type="text" class="purchase-vNo me-2" name="sales_voucher_master" id="id_sales_voucher_master"
          value="" maxlength="255" required>
          {% elif not master_form.instance.id %}
          <input type="text" class="purchase-vNo me-2" name="sales_voucher_master" id="id_sales_voucher_master"
          value="" maxlength="255" required>
          {% endif %}
      </div>
      <div class="d-flex ms-3">
        <label for="id_company_gst" class="ms-1 me-1">Company GST No :</label>
        <input type="text" class="purchase-itemName" name="company_gst" id="id_company_gst" value="27AAACG20210238"
          maxlength="50" readonly>
      </div>
      <div class="d-flex ms-3">
        <label for="id_ledger_type" class="me-1">ledger Type :</label>
        <input type="text" class="purchase-itemName" name="ledger_type" id="id_ledger_type"
          value="{{master_form.instance.ledger_type}}" maxlength="50" default='Sales'
          placeholder="Sales" readonly>
      </div>
      <div class="ms-2">
        <label for="id_selected_warehouse" class="me-2">Warehouse :</label>
        <input type="hidden" class="purchase-itemName text-black" name="selected_warehouse" required id="id_selected_warehouse" value="{{master_form.instance.selected_warehouse.id}}">
        <input type="text" class="purchase-itemName text-black" name="selected_warehouse_name" required id="id_selected_warehouse_Name" value="{{master_form.instance.selected_warehouse.warehouse_name_finished}}" readonly>
        
      </div>
    </div>
    <div class="mb-3 d-flex">
     
      <span id="purchaseError" class="error-messages"></span>
      <div class="d-flex">
        <label for="id_party_name" class="me-3">Party A/C Name:</label>
        <input type="hidden" class="item-select text-black" name="party_name"  id="id_party_name" value="{{master_form.instance.party_name.id}}">
        <input type="text" class="item-select text-black" name="party_name_value" required id="id_party_name_value" value="{{master_form.instance.party_name.name}}" readonly>

        
      </div>
      <div class="d-flex ms-3">
        <label for="id_GST_number" class="me-2">Party GST No :</label>
        <input type="text" class="purchase-itemName" name="GST_number" id="id_GST_number"
          value="{% if master_form.instance.id %}{{ master_form.instance.party_name.Gst_no }}{% endif %}" maxlength="15"
          readonly required>
      </div>
    </div>
    <div class="row">
        <div class="col-lg-6">
            <div class="mb-2">
                <label for="inwordSerialNo" class="fw-bold me-2">Scan :</label>
                <input type="text" name="scanned_serial_number" class="item-selects ms-3" id="inwordSerialNo">
                <label for="id_bin_Name" class="fw-bold ms-2 me-3">Bin :</label>
                <select  class="item-selects ms-3" name="product_bin" id="id_bin_Name">
                </select>
            </div>
            <div class="d-flex ">
                <div class="mb-2">
                    <label for="id_manualSerialNo" class="fw-bold">M-Scan :</label>
                    <input type="text" name="manual_serial_number" class="item-selects" id="id_manualSerialNo">
                </div>
            </div>
        </div>
        <div class="col-lg-6 " style="display:none" id="stockTransferList">
            <span id="responseMessage" class="ms-5 mb-1 fw-bold"></span>
            <table class="table table-striped table-hover table-bordered" id="stockTransferInstanceTable">
                <thead class="name_absolute">
                    <tr>
                        <th>Name</th>
                        <th>SKU</th>
                        <th>Color</th>
                        <th>IMG</th>
                    </tr>
                </thead>
                <tbody class="mainTableList" >
                   
                    <tr>
                        <td><input name="product_name" type="text" class="productShadeCutting_Material_input" id="id_product" value="" readonly></td>
                        <td><input name="product_sku" type="number" class="productorder_input"  id="id_product_sku" value="" readonly></td>
                        <td><input name="product_color" type="text" class="productorder_input"  id="id_product_color" value="" readonly></td>
                        <td>
                            <img id="productImgPreview" name="product_img" src="" alt="Product" style="width: 30px; height: 30px;">
                       </td>
                    
                        
                    </tr>
                 
                </tbody>
            </table>
            
                <button type="submit"  class="newProductCreateBtn" name="save" value="Save" id="stockTarnsferBin">Submit</button>
           
        </div>
        
    </div>
    <div>
        <table class="table table-striped table-hover table-bordered">
            <thead class="name_absolute">
                <tr>
                    <th>Outward No:</th>
                    <th>Total Qty:</th>
                </tr>
                <tr>
                    <th>No</th>
                    <th>Img</th>
                    <th>Ref No</th>
                    <th>Model Name</th>
                    <th>Color</th>
                    <th>Sku</th>
                    <th>Serial No</th>
                    <th>Bin No</th>
                    <th>Qty</th>
                </tr>
            </thead>
            <tbody class="mainTableList" >
                <tr>
                    <td></td>
                </tr>
            </tbody>
            
        </table>
    </div>

<script>
   $(document).ready(function(){

    $('#id_sales_voucher_master').on('blur',function(){
        var saleNo = $(this).val();
        console.log('saleNo',saleNo)
        $.ajax({
            url: '/otwarddataforsalereturnajax/',
           type: 'GET',
           data: { 
               'saleNo':saleNo,
           },
           success: function(response){
            console.log(response);
           },
           error:function(error){
            console.log(error)
           }
        })
    })

   })
</script>
{% endblock body %}